*-----------------------------------------------------------------------------
* <Rating>100</Rating>
*-----------------------------------------------------------------------------
    SUBROUTINE IDI.WRITE.LOG.WEBSERVICE(Y.LOG.TYP,Y.ID.REC.LOG,Y.MSG.LOG)
**ROUTINE TO WRITE LOG WEBSERVICE IN TABLE IDIH.WS.IN.OUT.LOG
**CREATED BY ATI-LHM(20160425)

    $INSERT I_COMMON
    $INSERT I_EQUATE
    $INSERT I_F.IDIH.WS.IN.OUT.LOG
    $INSERT I_F.IDIH.IN.FT.JOURNAL.PAR
    $INSERT I_F.IDIH.INT.LOG.PARAM
    $INSERT I_IDI.WS.INC.PRE.PROCESS.COMMON
    $INSERT I_IDI.WS.INC.POST.PROCESS.COMMON


    FN.LOG.WS = "F.IDIH.WS.IN.OUT.LOG"
    F.LOG.WS = ""
    CALL OPF(FN.LOG.WS,F.LOG.WS)

    FN.JOURNAL.PAR = 'F.IDIH.IN.FT.JOURNAL.PAR'
    F.JOURNAL.PAR = ''
    CALL OPF(FN.JOURNAL.PAR,F.JOURNAL.PAR)

    FN.LOG = "F.IDIH.INT.LOG.PARAM"
    F.LOG = ""
    CALL OPF(FN.LOG,F.LOG)

    Y.IN.UNIQUE.ID = ''


    FINDSTR 'IN.UNIQUE.ID' IN Y.MSG.SHARE SETTING AP,VP,SP THEN
        Y.IN.UNIQUE.ID = Y.MSG.SHARE<AP,2>
    END

    CALL CACHE.READ(FN.LOG, 'SYSTEM', R.LOG, LOG.ERR)

    Y.TYPE =  R.LOG<IN.LOG.INTERFACE.TYPE>
    FIND 'IN' IN Y.TYPE SETTING Ap,Vp,Sp THEN
        Y.INT.POS = Vp
        Y.LEVEL.PAR = FIELD((R.LOG<IN.LOG.LOG.LEVEL>),@VM,Y.INT.POS)
    END

    IF Y.LEVEL.PAR EQ 'OFF' THEN RETURN

    IF Y.LEVEL.PAR EQ 'DEBUG' OR 'INFO' THEN
        CALL F.READ(FN.JOURNAL.PAR,Y.IN.UNIQUE.ID,R.JOURNAL.PAR,F.JOURNAL.PAR,ERR)
        R.LOG<CONFIG.DESCRIPTION> = 'LOG':R.JOURNAL.PAR<JOURNAL.PAR.DESCRIPTION>
        IF R.LOG<CONFIG.DESCRIPTION> EQ '' THEN
            R.LOG<CONFIG.DESCRIPTION> = 'LOG WEBSERVICE'
        END

        CALL F.READ(FN.LOG.WS,Y.ID.REC.LOG,R.LOG.WS,F.LOG.WS,ERR)

        R.LOG.WS<CONFIG.INCOMMING.LOG> = Y.MSG.IN

        R.LOG.WS<CONFIG.PROCESSING.LOG> = Y.MSG.ORC.IN

        R.LOG.WS<CONFIG.OUT.PROC.LOG> = Y.MSG.ORC.OUT

        R.LOG.WS<CONFIG.OUTPUT.LOG> = Y.MSG.OUT


        CALL F.WRITE(FN.LOG.WS,Y.ID.REC.LOG,R.LOG.WS)
        CALL JOURNAL.UPDATE('')

    END

    RETURN

*----------------------------------------------------------------------
END




















